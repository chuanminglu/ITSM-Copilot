# ITSM智能辅助浏览器插件 - 迭代计划文档（单人全栈版）

> **📌 文档说明**: 基于US-001和US-002用户故事，为单人全栈工程师（Java/Python精通，前端有经验但Vue/React不太熟悉）拆解开发任务并制定迭代计划
>
> **编写日期**: 2025年12月10日  
> **项目约束**: 1人×10工作日，浏览器插件（Chrome Extension），无后端服务  
> **技术栈**: React 18 + TypeScript + TailwindCSS + Chrome Extension API + DeepSeek API  
> **参考文档**: US-001/US-002用户故事、软件架构文档2.4开发视图

---

## 📋 目录

1. [团队信息与产能评估](#1-团队信息与产能评估)
2. [用户故事分析](#2-用户故事分析)
3. [任务拆解与估算](#3-任务拆解与估算)
4. [迭代计划](#4-迭代计划)
5. [风险管理与应对](#5-风险管理与应对)
6. [验收与交付标准](#6-验收与交付标准)

---

## 1. 团队信息与产能评估

### 1.1 团队成员

| 角色 | 姓名 | 技能优势 | 技能短板 | 每日产能 |
|------|------|----------|----------|----------|
| **全栈工程师** | 开发者A | • Java/Python精通<br>• 有前端开发经验<br>• 后端架构能力强 | • Vue/React不太熟悉<br>• 前端工程化经验较少<br>• TypeScript可能需要学习 | 6小时/天<br>(考虑学习成本) |

### 1.2 产能分析

**基础产能**:
- **Sprint长度**: 10工作日
- **理论产能**: 1人 × 6小时/天 × 10天 = **60小时**

**经验因素调整**:
- ⚠️ **React新技术学习**: 预留15%时间（9小时）用于React/Hooks/组件化学习
- ⚠️ **TypeScript熟悉度**: 预留10%时间（6小时）用于TS类型系统学习
- ⚠️ **Chrome Extension API**: 预留10%时间（6小时）用于扩展开发学习
- ✅ **Python/API集成优势**: DeepSeek API集成可加速20%（节省3小时）

**实际可用产能**:
- 60小时 - 9小时 - 6小时 - 6小时 + 3小时 = **42小时**
- **产能利用率目标**: 80%（避免过度承诺）
- **Sprint承诺范围**: 42小时 × 80% = **33.6小时 ≈ 34小时**

### 1.3 技能提升计划

| 技术领域 | 学习资源 | 预计学习时间 | 产出物 |
|---------|---------|-------------|--------|
| **React基础** | 官方文档Hooks章节 | 3小时 | 完成TodoList示例 |
| **TypeScript** | TypeScript Handbook | 2小时 | 理解interface/type/泛型 |
| **Chrome Extension** | Chrome Developers文档 | 2小时 | 完成Hello World扩展 |
| **TailwindCSS** | TailwindCSS官方文档 | 1小时 | 理解utility-first概念 |
| **Vite构建工具** | Vite官方文档 | 1小时 | 配置Chrome扩展打包 |

**学习策略**: 边学边做，在实际任务中掌握技术，避免过度理论学习

---

## 2. 用户故事分析

### 2.1 US-001: 系统智能搜索与选择

#### 故事概述

**As a** 业务部门主管（李经理）  
**I want** 在侧边栏顶部的搜索框中输入关键词，实时检索系统并显示匹配结果列表，点击某个系统后自动在ITSM页面的系统下拉框中选择该系统  
**So that** 选择时间从2分钟缩短到30秒

#### 核心功能点

1. **侧边栏实时搜索**: 监听输入、防抖300ms、显示匹配结果
2. **拼音搜索支持**: 输入"kehu"匹配"客户关系管理系统"
3. **模糊匹配**: 关键词分词匹配
4. **双轨推荐策略**: Fuse.js规则引擎 + DeepSeek AI增强
5. **自动填充ITSM**: Content Script操作DOM，设置下拉框value
6. **性能要求**: 搜索响应P95<200ms

#### 技术复杂度分析

| 技术点 | 复杂度 | 理由 | 工时影响 |
|--------|--------|------|----------|
| React组件开发 | ⭐⭐⭐ | 不熟悉Hooks/状态管理 | +30% |
| Fuse.js集成 | ⭐ | 第三方库，文档清晰 | 标准 |
| DeepSeek API | ⭐⭐ | Python经验丰富，但需适配JS | -10% |
| Content Script | ⭐⭐⭐ | Chrome API学习成本 | +20% |
| 拼音匹配 | ⭐ | pinyin-pro库直接用 | 标准 |

---

### 2.2 US-002: 系统选择信心度反馈

#### 故事概述

**As a** 业务部门主管（李经理）  
**I want** 选择系统后，侧边栏询问"是否确定选择了正确的系统"（确定/不太确定/不确定）  
**So that** 表达不确定性，系统提供帮助或推荐其他系统

#### 核心功能点

1. **信心度UI组件**: 单选按钮组（确定/不太确定/不确定）
2. **分支处理逻辑**: 
   - 确定 → 正常继续
   - 不太确定 → 显示帮助信息（系统职责+联系方式）
   - 不确定 → 显示2-3个备选系统
3. **数据记录**: 信心度记录到LocalStorage
4. **配置驱动**: 帮助信息和备选系统从systems.json读取

#### 技术复杂度分析

| 技术点 | 复杂度 | 理由 | 工时影响 |
|--------|--------|------|----------|
| React条件渲染 | ⭐⭐ | 基础语法，学习曲线平缓 | 标准 |
| LocalStorage操作 | ⭐ | 原生API，简单直接 | 标准 |
| JSON配置加载 | ⭐ | Python经验可迁移 | -10% |
| 备选系统推荐 | ⭐⭐ | 复用US-001推荐逻辑 | 标准 |

---

## 3. 任务拆解与估算

### 3.1 任务拆解原则

1. **INVEST原则**: 每个任务独立、可协商、有价值、可估算、小粒度、可测试
2. **粒度控制**: 单个任务2-8小时，避免过大或过小
3. **技能匹配**: 根据开发者技能优势分配任务优先级
4. **依赖管理**: 明确任务间依赖关系，避免阻塞

### 3.2 估算方法

**三点估算法**:
- **乐观时间(O)**: 一切顺利，无阻塞
- **最可能时间(M)**: 正常情况，有小问题
- **悲观时间(P)**: 遇到技术难点，需要学习
- **期望时间(E)**: E = (O + 4M + P) / 6

**学习成本调整**:
- React新组件开发: +30%
- TypeScript类型定义: +10%
- Chrome Extension API: +20%
- Python/后端优势: -10%

---

### 3.3 US-001任务拆解与估算

#### 任务组1: 环境搭建与基础设施 [8小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T1.1** | 项目初始化与构建配置 | - | Vite项目 + manifest.json | 无 | +20% | 1.5h | 2h | 3h | 2.1h | **功能验收**:<br>✅ `npm run dev` 启动成功，无报错<br>✅ Chrome浏览器加载扩展成功，图标显示<br>✅ Sidebar页面正常打开（空白页面）<br>**代码质量**:<br>✅ manifest.json包含必需字段（name/version/manifest_version: 3）<br>✅ vite.config.ts配置正确（build.rollupOptions）<br>**文档要求**:<br>✅ README.md包含"Quick Start"章节 |
| **T1.2** | TypeScript配置与类型定义 | 架构文档 | types/*.ts文件 | T1.1 | +10% | 1h | 1.5h | 2.5h | 1.6h | **功能验收**:<br>✅ `npm run build` 编译成功，无TS错误<br>✅ VSCode智能提示正常工作<br>**代码质量**:<br>✅ System.ts定义完整（id/name/keywords/pinyin/category/responsibility）<br>✅ Template.ts定义完整（id/name/fields/examples）<br>✅ Recommendation.ts定义（system/confidence/source）<br>✅ tsconfig.json配置strict模式<br>**测试验证**:<br>✅ 导入类型无报错：`import { System } from './types/System'` |
| **T1.3** | systems.json配置数据准备 | ITSM系统列表 | config/systems.json | 无 | 无 | 1h | 1.5h | 2h | 1.5h | **功能验收**:<br>✅ 包含≥50个真实ITSM系统<br>✅ JSON格式验证通过（使用jsonlint）<br>**数据质量**:<br>✅ 每个系统包含完整字段：id/name/keywords(≥3个)/pinyin/category/responsibility/contact<br>✅ keywords覆盖常见搜索词（中文+英文+缩写）<br>✅ pinyin字段使用pinyin-pro自动生成<br>**示例验证**:<br>✅ CRM系统：keywords包含["客户", "kehu", "crm", "客户关系"]<br>✅ 至少覆盖5个分类（财务/客户/人事/IT/运维） |
| **T1.4** | TailwindCSS样式配置 | - | tailwind.config.js | T1.1 | +10% | 0.5h | 1h | 1.5h | 1h | **功能验收**:<br>✅ Tailwind样式类生效（测试：`bg-blue-500 text-white`）<br>✅ Sidebar基础布局渲染正常（宽度400px，固定右侧）<br>**代码质量**:<br>✅ tailwind.config.js配置content路径正确<br>✅ 引入自定义颜色（primary/secondary/accent）<br>✅ PostCSS配置正确（autoprefixer）<br>**视觉验证**:<br>✅ 测试页面显示蓝色背景+白色文字<br>✅ 响应式断点生效（sm/md/lg） |
| **T1.5** | React学习与Hello World | React文档 | 简单示例组件 | T1.1 | +30% | 1h | 1.5h | 2.5h | 1.6h | **学习验收**:<br>✅ 理解useState/useEffect/useCallback核心概念<br>✅ 阅读React官方文档Hooks章节（1小时）<br>**代码验收**:<br>✅ 完成TodoList示例（增删改查功能）<br>✅ 使用useState管理列表状态<br>✅ 使用useCallback优化事件处理<br>**功能测试**:<br>✅ 添加todo项正常<br>✅ 删除todo项正常<br>✅ 切换完成状态正常<br>**学习笔记**:<br>✅ 整理Hooks常见陷阱（依赖数组/闭包问题） |

**任务组1小计**: 2.1 + 1.6 + 1.5 + 1 + 1.6 = **7.8小时 ≈ 8小时**

---

#### 任务组2: Sidebar UI表示层 [6.5小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T2.1** | SystemSearchInput组件 | - | 搜索框组件 | T1.5 | +30% | 1h | 1.5h | 2.5h | 1.6h | **功能验收**:<br>✅ 支持中文输入显示正常（测试："客户管理"）<br>✅ 支持英文输入显示正常（测试："CRM"）<br>✅ 支持拼音输入显示正常（测试："kehu"）<br>**性能验收**:<br>✅ 防抖300ms生效（快速输入不触发搜索）<br>✅ 连续输入停止300ms后触发一次搜索<br>**UI验收**:<br>✅ 显示搜索图标（🔍）<br>✅ placeholder提示："搜索系统（支持中文/拼音）"<br>✅ focus状态显示蓝色边框<br>**代码质量**:<br>✅ 使用lodash.debounce实现防抖<br>✅ onChange事件触发父组件回调 |
| **T2.2** | SystemResultList组件 | 推荐结果数组 | 结果列表组件 | T2.1 | +20% | 1h | 1.5h | 2h | 1.5h | **功能验收**:<br>✅ 显示Top3推荐结果（按置信度降序）<br>✅ 每条结果显示：系统名称 + 置信度百分比（如"85%"）<br>✅ 显示推荐来源图标（🤖 AI / 📊 规则）<br>**交互验收**:<br>✅ 鼠标hover显示阴影效果<br>✅ 点击结果触发选择事件<br>✅ 选中项显示蓝色背景<br>**UI验收**:<br>✅ 无结果时显示："未找到匹配系统"<br>✅ loading状态显示骨架屏<br>✅ 置信度颜色：≥80%绿色，60-80%黄色，<60%红色<br>**数据验证**:<br>✅ 测试数据：[{system: "CRM", confidence: 0.92, source: "ai"}] |
| **T2.3** | SystemSearchPanel容器 | - | 完整搜索面板 | T2.1, T2.2 | +10% | 0.5h | 1h | 1.5h | 1h | **功能验收**:<br>✅ 集成T2.1和T2.2组件，布局正确<br>✅ 状态管理：idle/loading/success/error<br>✅ loading状态显示加载动画<br>✅ error状态显示错误提示 + 重试按钮<br>**交互验收**:<br>✅ 输入搜索词→loading→显示结果流程顺畅<br>✅ 点击结果→触发选择事件<br>✅ ESC键清空搜索框<br>**UI验收**:<br>✅ 面板宽度400px，高度自适应<br>✅ 内边距16px，外边距8px<br>✅ 圆角8px，阴影效果<br>**错误处理**:<br>✅ 网络错误提示："网络不稳定，已切换到基础搜索" |
| **T2.4** | Zustand状态管理集成 | - | 全局store | T2.3 | +20% | 0.5h | 1h | 1.5h | 1h | **功能验收**:<br>✅ 创建全局store：useRecommendationStore<br>✅ 状态字段：queryText/results/loading/error<br>✅ 动作方法：setQuery/setResults/setLoading/setError<br>**代码验收**:<br>✅ store文件：src/store/recommendationStore.ts<br>✅ 使用create<State>()创建<br>✅ 支持TypeScript类型推导<br>**测试验证**:<br>✅ 在T2.3组件中使用：const {results, setResults} = useRecommendationStore()<br>✅ 多组件状态同步（测试：两个组件读store）<br>**性能验证**:<br>✅ 使用shallow比较避免不必要重渲染<br>✅ DevTools工具集成（可选） |
| **T2.5** | Sidebar↔Background通信 | - | chrome.runtime消息 | T2.4 | +20% | 0.5h | 1h | 1.5h | 1h | **功能验收**:<br>✅ Sidebar发送搜索请求到Background<br>✅ Background返回Top3推荐结果<br>✅ 消息格式：{type: "SEARCH_SYSTEM", payload: {query: "CRM"}}<br>**代码验收**:<br>✅ 使用chrome.runtime.sendMessage发送<br>✅ 使用chrome.runtime.onMessage监听<br>✅ Promise封装，支持async/await<br>**测试验证**:<br>✅ 发送mock请求，控制台打印日志<br>✅ Background返回mock数据：[{system: "CRM", confidence: 0.9}]<br>✅ 超时5秒自动reject<br>**错误处理**:<br>✅ Background未响应提示："后台服务未启动" |
| **T2.6** | TailwindCSS响应式样式 | 设计稿 | 完整样式 | T2.1-T2.5 | 无 | 0.3h | 0.5h | 0.7h | 0.5h | **UI验收**:<br>✅ 整体风格清新简洁（白色背景+蓝色主色）<br>✅ 搜索框圆角8px，阴影效果<br>✅ 结果列表项hover效果<br>**响应式验收**:<br>✅ 1920px屏幕：Sidebar宽度400px<br>✅ 1366px屏幕：Sidebar宽度350px<br>✅ 移动端隐藏（屏幕<768px）<br>**颜色系统**:<br>✅ 主色：#3B82F6（blue-500）<br>✅ 文字：#1F2937（gray-800）<br>✅ 边框：#E5E7EB（gray-200）<br>**交互反馈**:<br>✅ 按钮hover透明度变化<br>✅ 输入框focus蓝色边框 |

**任务组2小计**: 1.6 + 1.5 + 1 + 1 + 1 + 0.5 = **6.6小时 ≈ 6.5小时**

---

#### 任务组3: Content Script DOM操作层 [3小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T3.1** | DOM选择器封装 | ITSM页面结构 | dom-manipulator.ts | 无 | 无 | 0.5h | 1h | 1.5h | 1h | **功能验收**:<br>✅ 准确定位系统下拉框（CSS选择器：`#systemSelect` 或 `select[name="system"]`）<br>✅ 准确定位需求描述框（`#descriptionTextarea`）<br>✅ 定位提交按钮（`#submitBtn`）<br>**兼容性验收**:<br>✅ ITSM v1.0页面结构定位成功<br>✅ ITSM v2.0页面结构定位成功<br>✅ 选择器未匹配时返回null，不抛异常<br>**代码验收**:<br>✅ 定义getSystemSelect()方法<br>✅ 定义getDescriptionArea()方法<br>✅ 定义getSubmitButton()方法<br>✅ 使用多选择器降级策略<br>**测试验证**:<br>✅ 在ITSM测试页控制台运行：getSystemSelect() !== null |
| **T3.2** | 系统下拉框自动填充 | 系统名称 | 填充函数 | T3.1 | 无 | 0.5h | 0.8h | 1h | 0.8h | **功能验收**:<br>✅ 设置下拉框value为指定系统名<br>✅ 触发change事件（使用new Event('change', {bubbles: true})）<br>✅ 触发input事件（兼容React表单）<br>**测试验收**:<br>✅ 调用fillSystemSelect("CRM系统")后，下拉框显示"CRM系统"<br>✅ ITSM页面监听到change事件（控制台打印日志）<br>✅ 填充后下拉框背景变绿色（表示已选择）<br>**错误处理**:<br>✅ 系统名不存在时返回false<br>✅ 下拉框未找到时抛异常<br>**代码验收**:<br>✅ 使用Object.getOwnPropertyDescriptor设置value（解决React表单问题） |
| **T3.3** | Sidebar↔ITSM通信桥 | - | event-bridge.ts | T3.2 | +10% | 0.5h | 0.8h | 1.5h | 0.9h | **功能验收**:<br>✅ Content Script监听来自Sidebar的消息<br>✅ 消息类型：FILL_SYSTEM / GET_CURRENT_SYSTEM<br>✅ 返回填充结果：{success: true, system: "CRM"}<br>**测试验收**:<br>✅ Sidebar发送{type: "FILL_SYSTEM", system: "CRM"}<br>✅ Content Script接收并执行填充<br>✅ 返回{success: true}给Sidebar<br>**代码验收**:<br>✅ 使用window.postMessage实现通信<br>✅ 消息包含source: "itsm-assistant"标识<br>✅ 安全校验：if (event.source !== window) return<br>**错误处理**:<br>✅ 填充失败返回{success: false, error: "下拉框未找到"} |
| **T3.4** | Content Script注入配置 | manifest.json | 配置更新 | T3.3 | +20% | 0.2h | 0.3h | 0.5h | 0.3h | **功能验收**:<br>✅ manifest.json配置content_scripts字段<br>✅ 匹配ITSM域名：["*://itsm.company.com/*", "*://itsm-test.company.com/*"]<br>✅ 注入content-script.js和event-bridge.js<br>**代码验收**:<br>✅ run_at: "document_end"（确保DOM加载完成）<br>✅ all_frames: false（只注入主框架）<br>**测试验证**:<br>✅ 打开ITSM页面，控制台打印："Content Script Loaded"<br>✅ chrome://extensions中查看注入状态<br>**权限配置**:<br>✅ permissions: ["activeTab", "scripting"]<br>✅ host_permissions: ["*://itsm.company.com/*"] |

**任务组3小计**: 1 + 0.8 + 0.9 + 0.3 = **3小时**

---

#### 任务组4: Background业务逻辑层 [10小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T4.1** | ConfigLoader配置加载器 | systems.json | 配置加载服务 | T1.3 | -10% | 0.5h | 0.8h | 1h | 0.8h | **功能验收**:<br>✅ 加载systems.json配置文件<br>✅ 返回System[]数组（50个系统）<br>✅ 数据验证通过（校验必填字段）<br>**代码验收**:<br>✅ 定义loadSystems()异步方法<br>✅ 使用fetch() 或 import()加载JSON<br>✅ 数据验证：validateSystemData(data)<br>**错误处理**:<br>✅ JSON格式错误抛异常<br>✅ 必填字段缺失抛异常<br>✅ 网络错误重试3次<br>**测试验证**:<br>✅ 单元测试：loadSystems()返回50个系统<br>✅ 每个系统包含id/name/keywords字段 |
| **T4.2** | Fuse.js规则引擎集成 | 搜索query | 匹配结果 | T4.1 | 无 | 1h | 1.5h | 2h | 1.5h | ✅ 多字段搜索<br>✅ 拼音匹配(pinyin-pro) |
| **T4.3** | DeepSeekClient实现 | Prompt | AI响应JSON | 无 | -10% | 1.5h | 2h | 3h | 2.1h | ✅ 超时控制5秒<br>✅ 降级策略生效 |
| **T4.4** | PromptBuilder实现 | query+系统列表 | Prompt字符串 | 无 | -10% | 0.5h | 0.8h | 1h | 0.8h | ✅ Few-Shot模板<br>✅ JSON Schema约束 |
| **T4.5** | ResponseParser实现 | AI响应 | 结构化JSON | 无 | -10% | 0.5h | 0.8h | 1h | 0.8h | ✅ JSON验证<br>✅ 提取推荐结果 |
| **T4.6** | SystemRecommender核心逻辑 | 搜索query | Top3推荐 | T4.2, T4.3 | 无 | 1h | 1.5h | 2h | 1.5h | ✅ 双轨并行执行<br>✅ 结果合并取最优 |
| **T4.7** | CacheManager缓存管理 | query hash | 缓存结果 | 无 | 无 | 0.5h | 0.8h | 1h | 0.8h | ✅ TTL验证(1小时)<br>✅ 命中率统计 |
| **T4.8** | StorageManager封装 | - | LocalStorage封装 | 无 | 无 | 0.3h | 0.5h | 0.7h | 0.5h | ✅ get/set/remove方法<br>✅ 错误处理 |
| **T4.9** | DataRepository日志记录 | 日志对象 | 写入成功 | T4.8 | 无 | 0.3h | 0.5h | 0.7h | 0.5h | ✅ 追加日志<br>✅ 30天自动清理 |
| **T4.10** | 性能优化与降级集成 | - | 优化服务 | T4.1-T4.9 | 无 | 0.5h | 0.8h | 1h | 0.8h | ✅ 缓存P95<50ms<br>✅ AI超时自动降级 |

**任务组4小计**: 0.8 + 1.5 + 2.1 + 0.8 + 0.8 + 1.5 + 0.8 + 0.5 + 0.5 + 0.8 = **10.1小时 ≈ 10小时**

---

#### 任务组5: 集成测试与调试 [3小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T5.1** | US-001端到端测试 | 完整功能 | 测试报告 | T2.1-T4.10 | 无 | 1h | 1.5h | 2h | 1.5h | ✅ 搜索→推荐→填充流程打通<br>✅ 性能P95<200ms |
| **T5.2** | 兼容性测试 | - | 兼容报告 | T5.1 | 无 | 0.5h | 0.8h | 1h | 0.8h | ✅ Chrome 90+正常<br>✅ Edge 90+正常 |
| **T5.3** | Bug修复与优化 | 测试问题清单 | 修复代码 | T5.1, T5.2 | 无 | 0.5h | 0.8h | 1h | 0.8h | ✅ 所有P0 Bug修复<br>✅ UI细节优化 |

**任务组5小计**: 1.5 + 0.8 + 0.8 = **3.1小时 ≈ 3小时**

---

#### US-001总工时

8 + 6.5 + 3 + 10 + 3 = **30.5小时**

---

### 3.4 US-002任务拆解与估算

#### 任务组6: 信心度UI组件 [2.5小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T6.1** | ConfidenceFeedbackPanel组件 | 填充成功事件 | 信心度UI | US-001完成 | +20% | 0.8h | 1h | 1.5h | 1.1h | ✅ 三个选项+动画<br>✅ 样式美观 |
| **T6.2** | HelpMessage组件 | 帮助信息 | 帮助卡片 | T6.1 | 无 | 0.3h | 0.5h | 0.7h | 0.5h | ✅ 显示职责+联系方式<br>✅ 可收起展开 |
| **T6.3** | AlternativeSystemsList组件 | 备选系统数组 | 备选列表 | T6.1 | 无 | 0.5h | 0.8h | 1h | 0.8h | ✅ 显示2-3个备选<br>✅ 点击可重新填充 |

**任务组6小计**: 1.1 + 0.5 + 0.8 = **2.4小时 ≈ 2.5小时**

---

#### 任务组7: 信心度业务逻辑 [1.5小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T7.1** | ConfidenceTracker核心逻辑 | level+系统名 | 响应action | T4.1 | -10% | 0.5h | 0.7h | 1h | 0.7h | ✅ 三分支处理<br>✅ 返回帮助/备选 |
| **T7.2** | ConfigLoader扩展(帮助信息) | 系统名 | 帮助信息 | T4.1 | 无 | 0.2h | 0.3h | 0.5h | 0.3h | ✅ 读取responsibility字段<br>✅ 缺失时默认提示 |
| **T7.3** | DataRepository扩展(信心度记录) | 信心度数据 | 写入成功 | T4.9 | 无 | 0.2h | 0.3h | 0.5h | 0.3h | ✅ 追加confidence_records<br>✅ 数据完整 |

**任务组7小计**: 0.7 + 0.3 + 0.3 = **1.3小时 ≈ 1.5小时**

---

#### 任务组8: US-002集成测试 [1小时]

| 任务ID | 任务描述 | 输入 | 输出 | 依赖 | 学习成本 | 乐观(O) | 最可能(M) | 悲观(P) | 期望(E) | 验收标准 |
|--------|----------|------|------|------|----------|---------|-----------|---------|---------|----------|
| **T8.1** | US-002端到端测试 | 完整功能 | 测试报告 | T6.1-T7.3 | 无 | 0.5h | 0.8h | 1h | 0.8h | ✅ 三分支逻辑验证<br>✅ 数据记录正常 |
| **T8.2** | Bug修复与优化 | 测试问题 | 修复代码 | T8.1 | 无 | 0.1h | 0.2h | 0.3h | 0.2h | ✅ P0 Bug修复<br>✅ UI细节优化 |

**任务组8小计**: 0.8 + 0.2 = **1小时**

---

#### US-002总工时

2.5 + 1.5 + 1 = **5小时**

---

### 3.5 总工时汇总

| 用户故事 | 任务组数 | 总任务数 | 总工时 | 占比 |
|---------|---------|---------|--------|------|
| **US-001** | 5 | 24 | 30.5h | 86% |
| **US-002** | 3 | 7 | 5h | 14% |
| **合计** | 8 | 31 | **35.5h** | 100% |

**产能对比分析**:
- **Sprint可用产能**: 34小时
- **任务总工时**: 35.5小时
- **超出部分**: 1.5小时（4.4%）

**调整方案**:
- ⚠️ 超出产能4.4%，在合理范围内（<5%）
- ✅ 通过提高工作效率（React熟练度提升）可抵消
- ✅ 如有延期风险，US-002的T8.2可延后至下一Sprint

---

## 4. 迭代计划

### 4.1 Sprint总览

| 项目 | 内容 |
|------|------|
| **Sprint目标** | 完成US-001系统智能搜索与选择 + US-002信心度反馈，实现MVP核心功能 |
| **Sprint长度** | 10工作日（2025年12月11日 - 12月24日） |
| **团队规模** | 1人（全栈工程师） |
| **可用产能** | 34小时 |
| **承诺工时** | 35.5小时（US-001: 30.5h + US-002: 5h） |
| **产能利用率** | 104%（略超，可控） |

---

### 4.2 日计划（Day-by-Day Breakdown）

#### 第1天 (Day 1): 环境搭建与学习 [6小时]

**目标**: 完成开发环境搭建，学习React/TypeScript基础

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T1.1 | 项目初始化与构建配置 | 2.1h | Vite项目运行成功 |
| 上午 | T1.5 | React学习与Hello World | 1.6h | 理解Hooks，完成示例 |
| 下午 | T1.2 | TypeScript配置与类型定义 | 1.6h | 类型定义文件 |
| 下午 | T1.4 | TailwindCSS样式配置 | 1h | 样式系统就绪 |

**里程碑**: ✅ 开发环境就绪，掌握React基础

---

#### 第2天 (Day 2): 配置数据与Sidebar基础UI [6小时]

**目标**: 准备配置数据，完成Sidebar搜索框UI

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T1.3 | systems.json配置数据准备 | 1.5h | 50个系统配置 |
| 上午 | T2.1 | SystemSearchInput组件 | 1.6h | 搜索框组件 |
| 下午 | T2.2 | SystemResultList组件 | 1.5h | 结果列表组件 |
| 下午 | T2.3 | SystemSearchPanel容器 | 1h | 完整搜索面板 |
| 晚上 | - | React实践总结 | 0.4h | 学习笔记 |

**里程碑**: ✅ Sidebar UI基本框架完成

---

#### 第3天 (Day 3): 状态管理与通信 [6小时]

**目标**: 完成Zustand状态管理，打通Sidebar↔Background通信

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T2.4 | Zustand状态管理集成 | 1h | 全局状态store |
| 上午 | T2.5 | Sidebar↔Background通信 | 1h | 消息通信机制 |
| 上午 | T2.6 | TailwindCSS响应式样式 | 0.5h | 完整样式 |
| 下午 | T3.1 | DOM选择器封装 | 1h | dom-manipulator.ts |
| 下午 | T3.2 | 系统下拉框自动填充 | 0.8h | 填充函数 |
| 下午 | T3.3 | Sidebar↔ITSM通信桥 | 0.9h | event-bridge.ts |
| 晚上 | T3.4 | Content Script注入配置 | 0.3h | manifest.json配置 |

**里程碑**: ✅ Sidebar↔ITSM页面通信打通

---

#### 第4天 (Day 4): 后端配置与规则引擎 [6小时]

**目标**: 完成配置加载器和Fuse.js规则引擎集成

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T4.1 | ConfigLoader配置加载器 | 0.8h | 配置加载服务 |
| 上午 | T4.2 | Fuse.js规则引擎集成 | 1.5h | 模糊搜索+拼音匹配 |
| 上午 | T4.7 | CacheManager缓存管理 | 0.8h | 缓存服务 |
| 下午 | T4.8 | StorageManager封装 | 0.5h | LocalStorage封装 |
| 下午 | T4.9 | DataRepository日志记录 | 0.5h | 日志服务 |
| 下午 | - | 单元测试编写 | 1.5h | Jest测试用例 |
| 晚上 | - | 调试与优化 | 0.4h | Bug修复 |

**里程碑**: ✅ 规则引擎推荐功能完成

---

#### 第5天 (Day 5): DeepSeek AI集成 [6小时]

**目标**: 完成DeepSeek API集成和Prompt工程

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T4.4 | PromptBuilder实现 | 0.8h | Few-Shot Prompt模板 |
| 上午 | T4.5 | ResponseParser实现 | 0.8h | JSON解析器 |
| 上午 | T4.3 | DeepSeekClient实现 | 2.1h | AI客户端+降级逻辑 |
| 下午 | - | API调试与测试 | 1.5h | API联调成功 |
| 晚上 | - | 学习笔记整理 | 0.8h | AI集成文档 |

**里程碑**: ✅ DeepSeek API集成完成

---

#### 第6天 (Day 6): 双轨推荐引擎与性能优化 [6小时]

**目标**: 完成SystemRecommender核心逻辑和性能优化

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T4.6 | SystemRecommender核心逻辑 | 1.5h | 双轨并行推荐 |
| 上午 | T4.10 | 性能优化与降级集成 | 0.8h | 缓存+降级策略 |
| 下午 | T5.1 | US-001端到端测试 | 1.5h | E2E测试通过 |
| 下午 | T5.2 | 兼容性测试 | 0.8h | Chrome/Edge测试 |
| 晚上 | T5.3 | Bug修复与优化 | 0.8h | P0 Bug全部修复 |
| 晚上 | - | 性能调优 | 0.6h | 达到P95<200ms |

**里程碑**: ✅ US-001功能完整交付

---

#### 第7天 (Day 7): US-002信心度UI开发 [6小时]

**目标**: 完成US-002的UI组件开发

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T6.1 | ConfidenceFeedbackPanel组件 | 1.1h | 信心度选择UI |
| 上午 | T6.2 | HelpMessage组件 | 0.5h | 帮助信息卡片 |
| 上午 | T6.3 | AlternativeSystemsList组件 | 0.8h | 备选系统列表 |
| 下午 | T7.1 | ConfidenceTracker核心逻辑 | 0.7h | 三分支处理逻辑 |
| 下午 | T7.2 | ConfigLoader扩展(帮助信息) | 0.3h | 读取帮助信息 |
| 下午 | T7.3 | DataRepository扩展(信心度记录) | 0.3h | 记录信心度数据 |
| 晚上 | - | UI样式优化 | 1.5h | 动画+交互优化 |
| 晚上 | - | 代码评审 | 0.8h | 自我Code Review |

**里程碑**: ✅ US-002功能开发完成

---

#### 第8天 (Day 8): US-002集成测试与Bug修复 [6小时]

**目标**: 完成US-002测试和整体集成验证

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | T8.1 | US-002端到端测试 | 0.8h | E2E测试通过 |
| 上午 | T8.2 | Bug修复与优化 | 0.2h | Bug修复 |
| 上午 | - | US-001+US-002整体集成测试 | 1.5h | 完整流程验证 |
| 下午 | - | 性能压测 | 1.5h | 负载测试报告 |
| 下午 | - | 安全测试 | 1h | XSS/CSRF防护验证 |
| 晚上 | - | 代码重构 | 1h | 优化代码结构 |

**里程碑**: ✅ US-001+US-002全部测试通过

---

#### 第9天 (Day 9): 文档编写与部署准备 [6小时]

**目标**: 完成技术文档和部署配置

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | - | README.md编写 | 1h | 安装使用文档 |
| 上午 | - | API文档编写(JSDoc) | 1h | 代码注释完善 |
| 下午 | - | 环境变量配置(.env.example) | 0.5h | 配置模板 |
| 下午 | - | 构建脚本优化(npm scripts) | 0.5h | 一键打包脚本 |
| 下午 | - | Chrome Extension打包测试 | 1h | .zip/.crx生成成功 |
| 晚上 | - | 用户手册编写 | 1.5h | 用户操作指南 |
| 晚上 | - | 演示视频录制 | 0.5h | Demo视频 |

**里程碑**: ✅ 文档完善，部署就绪

---

#### 第10天 (Day 10): 验收与交付 [6小时]

**目标**: UAT用户验收测试，MVP正式交付

| 时段 | 任务ID | 任务内容 | 工时 | 产出物 |
|------|--------|----------|------|--------|
| 上午 | - | UAT用户验收测试(2名用户) | 2h | UAT测试报告 |
| 上午 | - | 根据反馈调整优化 | 1h | 优化版本 |
| 下午 | - | 最终版本构建 | 0.5h | v1.0.0发布包 |
| 下午 | - | 安装部署验证 | 0.5h | 安装手册验证 |
| 下午 | - | 项目复盘会议 | 1h | 复盘文档 |
| 晚上 | - | 下一阶段规划 | 1h | Backlog优先级调整 |

**里程碑**: ✅ MVP正式交付

---

### 4.3 关键路径分析

```
环境搭建(Day 1) → Sidebar UI(Day 2-3) → 规则引擎(Day 4) → AI集成(Day 5) → 
双轨推荐(Day 6) → US-001测试(Day 6) → US-002开发(Day 7) → US-002测试(Day 8) → 
文档部署(Day 9) → 验收交付(Day 10)
```

**关键路径**:
- Day 1-6是关键路径（US-001），延期会影响整体交付
- Day 7-8是US-002开发，如US-001延期可压缩US-002时间
- Day 9-10是文档和验收，可弹性调整

**并行任务**:
- 无（单人开发，无法并行）

---

## 5. 风险管理与应对

### 5.1 技术风险

| 风险ID | 风险描述 | 概率 | 影响 | 风险等级 | 应对策略 | 负责人 |
|--------|----------|------|------|----------|----------|--------|
| **R1** | React Hooks学习曲线陡峭，开发效率低于预期 | 60% | 高 | 🔴 P0 | • Day 1集中学习React<br>• 使用ChatGPT辅助解决React问题<br>• 简化组件设计，避免复杂状态逻辑 | 开发者A |
| **R2** | TypeScript类型定义耗时超预期 | 40% | 中 | 🟡 P1 | • 前期使用`any`类型快速开发<br>• 后期集中完善类型定义<br>• 参考开源项目类型定义 | 开发者A |
| **R3** | Chrome Extension API不熟悉，调试困难 | 50% | 中 | 🟡 P1 | • Day 1完成Hello World扩展<br>• 使用Chrome DevTools调试<br>• 参考官方示例代码 | 开发者A |
| **R4** | DeepSeek API限流或不稳定 | 30% | 高 | 🔴 P0 | • 实现降级策略（API失败→规则引擎）<br>• 缓存1小时减少API调用<br>• 监控API可用性 | 开发者A |
| **R5** | 性能优化不达标(P95>200ms) | 40% | 中 | 🟡 P1 | • 使用防抖/节流<br>• 缓存优化<br>• 异步处理避免阻塞 | 开发者A |

---

### 5.2 进度风险

| 风险ID | 风险描述 | 概率 | 影响 | 风险等级 | 应对策略 |
|--------|----------|------|------|----------|----------|
| **R6** | Day 1-3学习成本超预期，延期1-2天 | 50% | 高 | 🔴 P0 | • 压缩US-002开发时间（5h→3h）<br>• 减少文档编写时间（Day 9）<br>• 延后UAT至下一Sprint |
| **R7** | US-001测试发现重大Bug，需返工 | 30% | 高 | 🔴 P0 | • Day 4-5增加单元测试覆盖<br>• Day 6预留0.8h Bug修复时间<br>• 代码评审减少Bug |
| **R8** | DeepSeek API集成失败，需切换方案 | 20% | 高 | 🔴 P0 | • 备选方案：OpenAI GPT-3.5<br>• 架构已抽象接口，切换成本低<br>• Day 5预留调试时间 |

---

### 5.3 资源风险

| 风险ID | 风险描述 | 概率 | 影响 | 风险等级 | 应对策略 |
|--------|----------|------|------|----------|----------|
| **R9** | 开发者请假或生病，产能下降 | 10% | 高 | 🔴 P0 | • 保持代码整洁可读<br>• 每日提交代码到Git<br>• 文档及时更新 |
| **R10** | 产能利用率过高(104%)，加班压力大 | 70% | 中 | 🟡 P1 | • 严格控制每日6小时工作<br>• US-002的T8.2可延后<br>• 避免过度承诺 |

---

### 5.4 质量风险

| 风险ID | 风险描述 | 概率 | 影响 | 风险等级 | 应对策略 |
|--------|----------|------|------|----------|----------|
| **R11** | 单元测试覆盖率不足，隐藏Bug多 | 40% | 中 | 🟡 P1 | • Day 4开始编写单元测试<br>• 核心逻辑测试覆盖≥80%<br>• E2E测试覆盖关键路径 |
| **R12** | UI交互体验差，用户反馈负面 | 30% | 中 | 🟡 P1 | • Day 10 UAT提前发现问题<br>• 参考优秀Chrome扩展UI<br>• TailwindCSS确保样式一致 |

---

### 5.5 风险缓解措施总结

**优先缓解措施**:
1. ✅ **Day 1集中学习React**: 降低R1风险，打好基础
2. ✅ **实现降级策略**: 降低R4风险，确保基本可用
3. ✅ **每日代码提交**: 降低R9风险，保证进度可追溯
4. ✅ **预留Bug修复时间**: 降低R7风险，避免返工延期

**应急预案**:
- 如Day 6延期 → 压缩US-002至3小时，砍掉T8.2
- 如API集成失败 → 切换到OpenAI GPT-3.5（1小时切换成本）
- 如产能严重不足 → 延后US-002至下一Sprint

---

## 6. 验收与交付标准

### 6.1 US-001验收标准

| 验收项 | 验收标准 | 测试方法 | 负责人 |
|--------|----------|----------|--------|
| **AC1** | 侧边栏实时搜索并显示结果 | 输入"CRM"，200ms内显示匹配系统 | QA |
| **AC2** | 拼音搜索支持 | 输入"kehu"，显示"客户关系管理系统" | QA |
| **AC3** | 模糊匹配 | 输入"客户查"，显示相关系统 | QA |
| **AC4** | 无匹配结果提示 | 输入"abcdefg"，显示"未找到匹配系统" | QA |
| **AC5** | 自动操作ITSM下拉框 | 点击系统，ITSM下拉框自动选中 | QA |
| **AC6** | 性能要求 | 搜索响应P95<200ms（100次测试） | QA |

**整体验收**:
- ✅ 所有AC通过
- ✅ 性能P95<200ms
- ✅ Chrome 90+ / Edge 90+兼容
- ✅ 无P0/P1级别Bug

---

### 6.2 US-002验收标准

| 验收项 | 验收标准 | 测试方法 | 负责人 |
|--------|----------|----------|--------|
| **AC1** | 选择系统后询问信心度 | 填充完成后弹出信心度询问 | QA |
| **AC2** | 选择"确定"正常继续 | 点击"确定"，询问消失 | QA |
| **AC3** | 选择"不太确定"显示提示 | 点击"不太确定"，显示帮助信息 | QA |
| **AC4** | 选择"不确定"提供备选 | 点击"不确定"，显示2-3个备选系统 | QA |
| **AC5** | 记录信心度数据 | LocalStorage包含confidence_records | QA |

**整体验收**:
- ✅ 所有AC通过
- ✅ 三分支逻辑正确
- ✅ 数据记录完整
- ✅ UI交互流畅

---

### 6.3 交付物清单

| 交付物 | 内容 | 格式 | 负责人 | 交付时间 |
|--------|------|------|--------|----------|
| **源代码** | 完整项目代码 | Git仓库 | 开发者A | Day 10 |
| **安装包** | Chrome扩展安装包 | .zip / .crx | 开发者A | Day 9 |
| **README.md** | 安装使用文档 | Markdown | 开发者A | Day 9 |
| **API文档** | JSDoc代码注释 | HTML | 开发者A | Day 9 |
| **用户手册** | 操作指南 | PDF | 开发者A | Day 9 |
| **测试报告** | UAT测试结果 | Excel | QA | Day 10 |
| **演示视频** | 功能演示 | MP4 | 开发者A | Day 9 |
| **复盘文档** | 项目总结 | Markdown | PM | Day 10 |

---

### 6.4 UAT用户验收测试

**测试用户**: 李经理（业务部门主管）+ 小王（一线业务员）

**测试场景**:
1. **场景1**: 李经理提交客户管理需求（使用系统搜索）
2. **场景2**: 小王提交Bug反馈需求（使用拼音搜索）
3. **场景3**: 李经理选择系统后表达"不确定"（信心度反馈）

**满意度评分**: 5分制（1=非常不满意，5=非常满意）

**通过标准**:
- ✅ 用户满意度≥4分
- ✅ 无P0/P1级别问题
- ✅ 功能可用性100%

---

## 总结

### 项目概览

| 项目 | 内容 |
|------|------|
| **Sprint长度** | 10工作日 |
| **团队规模** | 1人（全栈工程师） |
| **可用产能** | 34小时 |
| **任务总数** | 31个任务 |
| **总工时** | 35.5小时（US-001: 30.5h + US-002: 5h） |
| **产能利用率** | 104%（略超，可控） |
| **风险等级** | 🟡 中等（主要风险：React学习成本） |

### 关键成功因素

1. ✅ **Day 1集中学习React**: 打好基础，降低后续开发成本
2. ✅ **双轨推荐策略**: AI增强+规则降级，确保可用性
3. ✅ **每日代码提交**: 保证进度可追溯，降低资源风险
4. ✅ **严格控制每日6小时**: 避免过度承诺，保持可持续节奏

### 下一步行动

- [ ] **Day 1上午**: 初始化Vite项目，配置manifest.json
- [ ] **Day 1下午**: 学习React Hooks，完成TodoList示例
- [ ] **Day 2上午**: 准备systems.json配置数据
- [ ] **每日晚上**: 代码提交+学习笔记整理

---

**文档版本**: v1.0  
**生成日期**: 2025年12月10日  
**维护状态**: ✅ 可直接用于Sprint计划会和任务分配
